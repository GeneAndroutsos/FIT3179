{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "autosize": { "type": "fit", "contains": "padding" },
    "width": 950,
    "height": 620,
    "projection": {
      "type": "albers",
      "center": [0, -27],
      "parallels": [-17, -39],
      "scale": 950,
      "translate": [475, 320],
      "rotate": [-135, 0, 0]
    },
    "params": [
      {
        "name": "selectedYear",
        "value": 2000,
        "bind": {
          "input": "range",
          "min": 1975,
          "max": 2019,
          "step": 1,
          "name": "Select Year: "
        }
      }
    ],
    "layer": [
      {
        "data": {
          "url": "https://raw.githubusercontent.com/rowanhogan/australian-states/master/states.geojson"
        },
        "mark": {
          "type": "geoshape",
          "fill": "#dbeafe",
          "stroke": "#475569",
          "strokeWidth": 1
        }
      },
      {
        "data": { "graticule": { "step": [4, 4] } },
        "mark": {
          "type": "geoshape",
          "stroke": "#cbd5e1",
          "strokeWidth": 0.35
        }
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/GeneAndroutsos/FIT3179/main/AustralianAverageMaxTemp.csv"
        },
        "transform": [{ "filter": "datum.Year == selectedYear" }],
        "mark": {
          "type": "circle",
          "opacity": 0.88,
          "stroke": "#1e293b",
          "strokeWidth": 0.25
        },
        "encoding": {
          "longitude": { "field": "long", "type": "quantitative" },
          "latitude": { "field": "lat", "type": "quantitative" },
          "color": {
            "field": "Temp",
            "type": "quantitative",
            "title": "Average Max Temp (°C)",
            "scale": { "scheme": "redyellowblue", "reverse": true, "domain": [10, 45] },
            "legend": { "orient": "right", "offset": 15 }
          },
          "size": {
            "field": "Temp",
            "type": "quantitative",
            "scale": { "range": [30, 250] },
            "legend": null
          },
          "tooltip": [
            { "field": "name", "title": "Station" },
            { "field": "Year", "title": "Year" },
            { "field": "Temp", "title": "Avg Max Temp (°C)" }
          ]
        }
      },
      {
        "data": { "values": [{}] },
        "transform": [{ "calculate": "selectedYear", "as": "displayYear" }],
        "mark": {
          "type": "text",
          "align": "center",
          "fontSize": 20,
          "fontWeight": "bold",
          "color": "#1e293b",
          "y": 18
        },
        "encoding": {
          "text": { "field": "displayYear", "type": "nominal" }
        }
      }
    ],
    "config": {
      "background": "#f8fafc",
      "view": { "stroke": null },
      "legend": {
        "titleFontSize": 12,
        "labelFontSize": 11,
        "labelColor": "#1e293b",
        "titleColor": "#1e293b"
      }
    }
  }
  